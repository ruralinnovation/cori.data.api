{"version":3,"file":"indexof.js","sources":["../../../../../node_modules/apache-arrow/visitor/indexof.mjs"],"sourcesContent":["// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { Type } from '../enum.mjs';\nimport { Visitor } from '../visitor.mjs';\nimport { instance as getVisitor } from './get.mjs';\nimport { getBool, BitIterator } from '../util/bit.mjs';\nimport { createElementComparator } from '../util/vector.mjs';\n/** @ignore */\nexport class IndexOfVisitor extends Visitor {\n}\n/** @ignore */\nfunction nullIndexOf(data, searchElement) {\n    // if you're looking for nulls and the vector isn't empty, we've got 'em!\n    return searchElement === null && data.length > 0 ? 0 : -1;\n}\n/** @ignore */\nfunction indexOfNull(data, fromIndex) {\n    const { nullBitmap } = data;\n    if (!nullBitmap || data.nullCount <= 0) {\n        return -1;\n    }\n    let i = 0;\n    for (const isValid of new BitIterator(nullBitmap, data.offset + (fromIndex || 0), data.length, nullBitmap, getBool)) {\n        if (!isValid) {\n            return i;\n        }\n        ++i;\n    }\n    return -1;\n}\n/** @ignore */\nfunction indexOfValue(data, searchElement, fromIndex) {\n    if (searchElement === undefined) {\n        return -1;\n    }\n    if (searchElement === null) {\n        switch (data.typeId) {\n            // Unions don't have a nullBitmap of its own, so compare the `searchElement` to `get()`.\n            case Type.Union:\n                break;\n            // Dictionaries do have a nullBitmap, but their dictionary could also have null elements.\n            case Type.Dictionary:\n                break;\n            // All other types can iterate the null bitmap\n            default:\n                return indexOfNull(data, fromIndex);\n        }\n    }\n    const get = getVisitor.getVisitFn(data);\n    const compare = createElementComparator(searchElement);\n    for (let i = (fromIndex || 0) - 1, n = data.length; ++i < n;) {\n        if (compare(get(data, i))) {\n            return i;\n        }\n    }\n    return -1;\n}\n/** @ignore */\nfunction indexOfUnion(data, searchElement, fromIndex) {\n    // Unions are special -- they do have a nullBitmap, but so can their children.\n    // If the searchElement is null, we don't know whether it came from the Union's\n    // bitmap or one of its children's. So we don't interrogate the Union's bitmap,\n    // since that will report the wrong index if a child has a null before the Union.\n    const get = getVisitor.getVisitFn(data);\n    const compare = createElementComparator(searchElement);\n    for (let i = (fromIndex || 0) - 1, n = data.length; ++i < n;) {\n        if (compare(get(data, i))) {\n            return i;\n        }\n    }\n    return -1;\n}\nIndexOfVisitor.prototype.visitNull = nullIndexOf;\nIndexOfVisitor.prototype.visitBool = indexOfValue;\nIndexOfVisitor.prototype.visitInt = indexOfValue;\nIndexOfVisitor.prototype.visitInt8 = indexOfValue;\nIndexOfVisitor.prototype.visitInt16 = indexOfValue;\nIndexOfVisitor.prototype.visitInt32 = indexOfValue;\nIndexOfVisitor.prototype.visitInt64 = indexOfValue;\nIndexOfVisitor.prototype.visitUint8 = indexOfValue;\nIndexOfVisitor.prototype.visitUint16 = indexOfValue;\nIndexOfVisitor.prototype.visitUint32 = indexOfValue;\nIndexOfVisitor.prototype.visitUint64 = indexOfValue;\nIndexOfVisitor.prototype.visitFloat = indexOfValue;\nIndexOfVisitor.prototype.visitFloat16 = indexOfValue;\nIndexOfVisitor.prototype.visitFloat32 = indexOfValue;\nIndexOfVisitor.prototype.visitFloat64 = indexOfValue;\nIndexOfVisitor.prototype.visitUtf8 = indexOfValue;\nIndexOfVisitor.prototype.visitLargeUtf8 = indexOfValue;\nIndexOfVisitor.prototype.visitBinary = indexOfValue;\nIndexOfVisitor.prototype.visitLargeBinary = indexOfValue;\nIndexOfVisitor.prototype.visitFixedSizeBinary = indexOfValue;\nIndexOfVisitor.prototype.visitDate = indexOfValue;\nIndexOfVisitor.prototype.visitDateDay = indexOfValue;\nIndexOfVisitor.prototype.visitDateMillisecond = indexOfValue;\nIndexOfVisitor.prototype.visitTimestamp = indexOfValue;\nIndexOfVisitor.prototype.visitTimestampSecond = indexOfValue;\nIndexOfVisitor.prototype.visitTimestampMillisecond = indexOfValue;\nIndexOfVisitor.prototype.visitTimestampMicrosecond = indexOfValue;\nIndexOfVisitor.prototype.visitTimestampNanosecond = indexOfValue;\nIndexOfVisitor.prototype.visitTime = indexOfValue;\nIndexOfVisitor.prototype.visitTimeSecond = indexOfValue;\nIndexOfVisitor.prototype.visitTimeMillisecond = indexOfValue;\nIndexOfVisitor.prototype.visitTimeMicrosecond = indexOfValue;\nIndexOfVisitor.prototype.visitTimeNanosecond = indexOfValue;\nIndexOfVisitor.prototype.visitDecimal = indexOfValue;\nIndexOfVisitor.prototype.visitList = indexOfValue;\nIndexOfVisitor.prototype.visitStruct = indexOfValue;\nIndexOfVisitor.prototype.visitUnion = indexOfValue;\nIndexOfVisitor.prototype.visitDenseUnion = indexOfUnion;\nIndexOfVisitor.prototype.visitSparseUnion = indexOfUnion;\nIndexOfVisitor.prototype.visitDictionary = indexOfValue;\nIndexOfVisitor.prototype.visitInterval = indexOfValue;\nIndexOfVisitor.prototype.visitIntervalDayTime = indexOfValue;\nIndexOfVisitor.prototype.visitIntervalYearMonth = indexOfValue;\nIndexOfVisitor.prototype.visitDuration = indexOfValue;\nIndexOfVisitor.prototype.visitDurationSecond = indexOfValue;\nIndexOfVisitor.prototype.visitDurationMillisecond = indexOfValue;\nIndexOfVisitor.prototype.visitDurationMicrosecond = indexOfValue;\nIndexOfVisitor.prototype.visitDurationNanosecond = indexOfValue;\nIndexOfVisitor.prototype.visitFixedSizeList = indexOfValue;\nIndexOfVisitor.prototype.visitMap = indexOfValue;\n/** @ignore */\nexport const instance = new IndexOfVisitor();\n\n//# sourceMappingURL=indexof.mjs.map\n"],"names":["getVisitor"],"mappings":"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","x_google_ignoreList":[0]}