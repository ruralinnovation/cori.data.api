{"version":3,"file":"util.js","sources":["../../../../../../../node_modules/arquero/src/arrow/builder/util.js"],"sourcesContent":["import { Data, Vector } from 'apache-arrow';\n\nexport function ceil64Bytes(length, bpe = 1) {\n  return ((((length * bpe) + 63) & ~63) || 64) / bpe;\n}\n\nexport function array(Type, length, bpe = Type.BYTES_PER_ELEMENT) {\n  return new Type(ceil64Bytes(length, bpe));\n}\n\nexport function arrowData(d) {\n  return d instanceof Data\n    ? d\n    : new Data(d.type, 0, d.length, d.nulls, d.buffers, null, d.dict);\n}\n\nexport function arrowVector(data) {\n  return new Vector([arrowData(data)]);\n}\n\nexport const encoder = new TextEncoder();\n\nexport function encode(data, idx, str) {\n  const bytes = encoder.encode(str);\n  data.set(bytes, idx);\n  return bytes.length;\n}\n\nexport function encodeInto(data, idx, str) {\n  return encoder.encodeInto(str, data.subarray(idx)).written;\n}\n\nexport const writeUtf8 = encoder.encodeInto ? encodeInto : encode;"],"names":[],"mappings":";;;;;;;;;AAEO,SAAS,WAAW,CAAC,MAAM,EAAE,GAAG,GAAG,CAAC,EAAE;AAC7C,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,GAAG,IAAI,EAAE,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,GAAG,CAAC;AACrD,CAAC;AACD;AACO,SAAS,KAAK,CAAC,IAAI,EAAE,MAAM,EAAE,GAAG,GAAG,IAAI,CAAC,iBAAiB,EAAE;AAClE,EAAE,OAAO,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC;AAC5C,CAAC;AACD;AACO,SAAS,SAAS,CAAC,CAAC,EAAE;AAC7B,EAAE,OAAO,CAAC,YAAY,IAAI;AAC1B,MAAM,CAAC;AACP,MAAM,IAAI,IAAI,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;AACtE,CAAC;AACD;AACO,SAAS,WAAW,CAAC,IAAI,EAAE;AAClC,EAAE,OAAO,IAAI,MAAM,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACvC,CAAC;AACD;AACY,MAAC,OAAO,GAAG,IAAI,WAAW,GAAG;AACzC;AACO,SAAS,MAAM,CAAC,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE;AACvC,EAAE,MAAM,KAAK,GAAG,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AACpC,EAAE,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;AACvB,EAAE,OAAO,KAAK,CAAC,MAAM,CAAC;AACtB,CAAC;AACD;AACO,SAAS,UAAU,CAAC,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE;AAC3C,EAAE,OAAO,OAAO,CAAC,UAAU,CAAC,GAAG,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC;AAC7D,CAAC;AACD;AACY,MAAC,SAAS,GAAG,OAAO,CAAC,UAAU,GAAG,UAAU,GAAG;;;;","x_google_ignoreList":[0]}