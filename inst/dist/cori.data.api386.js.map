{"version":3,"file":"cori.data.api386.js","sources":["../../node_modules/axios/lib/helpers/trackStream.js"],"sourcesContent":["\n\nexport const streamChunk = function* (chunk, chunkSize) {\n  let len = chunk.byteLength;\n\n  if (!chunkSize || len < chunkSize) {\n    yield chunk;\n    return;\n  }\n\n  let pos = 0;\n  let end;\n\n  while (pos < len) {\n    end = pos + chunkSize;\n    yield chunk.slice(pos, end);\n    pos = end;\n  }\n}\n\nexport const readBytes = async function* (iterable, chunkSize, encode) {\n  for await (const chunk of iterable) {\n    yield* streamChunk(ArrayBuffer.isView(chunk) ? chunk : (await encode(String(chunk))), chunkSize);\n  }\n}\n\nexport const trackStream = (stream, chunkSize, onProgress, onFinish, encode) => {\n  const iterator = readBytes(stream, chunkSize, encode);\n\n  let bytes = 0;\n\n  return new ReadableStream({\n    type: 'bytes',\n\n    async pull(controller) {\n      const {done, value} = await iterator.next();\n\n      if (done) {\n        controller.close();\n        onFinish();\n        return;\n      }\n\n      let len = value.byteLength;\n      onProgress && onProgress(bytes += len);\n      controller.enqueue(new Uint8Array(value));\n    },\n    cancel(reason) {\n      onFinish(reason);\n      return iterator.return();\n    }\n  }, {\n    highWaterMark: 2\n  })\n}\n"],"names":["streamChunk","chunk","chunkSize","len","pos","end","readBytes","iterable","encode","trackStream","stream","onProgress","onFinish","iterator","bytes","controller","done","value","reason"],"mappings":";;;;;;AAEY,MAACA,IAAc,WAAWC,GAAOC,GAAW;AACtD,MAAIC,IAAMF,EAAM;AAEhB,MAAI,CAACC,KAAaC,IAAMD,GAAW;AACjC,UAAMD;AACN;AAAA,EACD;AAED,MAAIG,IAAM,GACNC;AAEJ,SAAOD,IAAMD;AACX,IAAAE,IAAMD,IAAMF,GACZ,MAAMD,EAAM,MAAMG,GAAKC,CAAG,GAC1BD,IAAMC;AAEV,GAEaC,IAAY,iBAAiBC,GAAUL,GAAWM,GAAQ;AACrE,mBAAiBP,KAASM;AACxB,WAAOP,EAAY,YAAY,OAAOC,CAAK,IAAIA,IAAS,MAAMO,EAAO,OAAOP,CAAK,CAAC,GAAIC,CAAS;AAEnG,GAEaO,IAAc,CAACC,GAAQR,GAAWS,GAAYC,GAAUJ,MAAW;AAC9E,QAAMK,IAAWP,EAAUI,GAAQR,GAAWM,CAAM;AAEpD,MAAIM,IAAQ;AAEZ,SAAO,IAAI,eAAe;AAAA,IACxB,MAAM;AAAA,IAEN,MAAM,KAAKC,GAAY;AACrB,YAAM,EAAC,MAAAC,GAAM,OAAAC,EAAK,IAAI,MAAMJ,EAAS,KAAI;AAEzC,UAAIG,GAAM;AACR,QAAAD,EAAW,MAAK,GAChBH;AACA;AAAA,MACD;AAED,UAAIT,IAAMc,EAAM;AAChB,MAAAN,KAAcA,EAAWG,KAASX,CAAG,GACrCY,EAAW,QAAQ,IAAI,WAAWE,CAAK,CAAC;AAAA,IACzC;AAAA,IACD,OAAOC,GAAQ;AACb,aAAAN,EAASM,CAAM,GACRL,EAAS;IACjB;AAAA,EACL,GAAK;AAAA,IACD,eAAe;AAAA,EACnB,CAAG;AACH;","x_google_ignoreList":[0]}