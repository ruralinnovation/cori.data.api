{"version":3,"file":"CategoricalLegend.js","sources":["../../../../lib/@cori-risi/components/CategoricalLegend.tsx"],"sourcesContent":["import React from 'react';\nimport style from \"./styles/CategoricalLegend.module.css\";\n\ninterface CategoricalLegendProps {\n    domain_names?: string[] | undefined;\n    domain?: string[] | undefined; // Should be in the order of what appears top to bottom in the chart\n    range?: unknown[] | undefined;\n    scale?: any | undefined;\n    title?: string;\n    na_message?: string;\n}\n\n/**\n * This is a prototype generalization of the CategoricalLegend component used in the\n * [ERC tool](https://github.com/ruralinnovation/erc-frontend-ts/tree/dev/MDAT-30-frontend-ui-shared-library/src/components){target=_blank}\n *\n * ```ts\n * import { CategoricalLegend } from '@cori-risi/cori.data.api';\n *\n * import \"@cori-risi/cori.data.api/inst/dist/cori.data.api.css\";\n *\n * // ...\n *\n * const colorScale = d3.scaleOrdinal<string>()\n *       .domain(groups) // Input domain\n *       .range([\"#A3E2B5\", \"#00835D\", \"#26535C\"]);\n *\n * const colorScaleDomain = colorScale.domain();\n * const colorScaleRange = colorScale.range();\n *\n * // ...\n *\n * <CategoricalLegend domain_names={colorScaleDomain.map(c => data.filter(d => d.geoid === c).map(d => d.name)[0])}\n *                    domain={colorScaleDomain}\n *                    range={colorScaleRange} />\n * ```\n *\n *  @param props.domain_names - an (array) of names, each one mapped to a category in the color scale domain\n *  @param props.domain - d3 color scale domain\n *  @param props.range - d3 color scale range\n */\nfunction CategoricalLegend (props: {\n    domain_names?: string[] | undefined,\n    domain?: string[] | undefined,\n    range?: unknown[] | undefined,\n    scale?: any | undefined,\n    title?: string,\n    na_message?: string // TODO: default to \"N/A\"\n}) {\n\n    const rows = [];\n\n    const {\n        domain_names,\n        domain,\n        range,\n        title,\n        scale,\n        na_message\n    } = (props as unknown as CategoricalLegendProps);\n\n    if (!!domain && !!range) {\n\n        console.log(\"CategoricalLegend:\");\n        console.log(`domain.length: ${domain.length}, range.length: ${range.length}`)\n\n        if (domain.length <= range.length) {\n\n            for (let i = 0; i < domain.length; ++i) {\n\n                if (typeof range[i] === \"string\") {\n\n                    const color: string = range[i] as string;\n\n                    if (!!domain_names) {\n                        rows.push(\n                            <div className={style[\"entry\"]} key={i}>\n                                <div\n                                    className={style[\"key\"]}\n                                    style={{\n                                        backgroundColor: color\n                                    }}>\n                                </div>\n                                {(!!domain_names) ?\n                                    <p>{domain_names[i] || domain[i]}</p> :\n                                    <p></p>\n                                }\n                            </div>\n                        );\n                    }\n\n                }\n            }\n\n        }\n\n        return (\n            <div className={style[\"categorical-legend\"]}>\n                {rows}\n            </div>\n        )\n    } else {\n        return (\n            <div className={style[\"categorical-legend\"]}>\n                <span>CategoricalLegend</span>\n            </div>\n        )\n    }\n\n}\n\nexport default CategoricalLegend;\n"],"names":["React"],"mappings":";;;;;;;;;AAYA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BG;AACH,SAAS,iBAAiB,CAAE,KAO3B,EAAA;IAEG,MAAM,IAAI,GAAG,EAAE,CAAC;AAEhB,IAAA,MAAM,EACF,YAAY,EACZ,MAAM,EACN,KAAK,EACL,KAAK,EACL,KAAK,EACL,UAAU,EACb,GAAI,KAA2C,CAAC;IAEjD,IAAI,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,KAAK,EAAE;AAErB,QAAA,OAAO,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;AAClC,QAAA,OAAO,CAAC,GAAG,CAAC,CAAA,eAAA,EAAkB,MAAM,CAAC,MAAM,CAAA,gBAAA,EAAmB,KAAK,CAAC,MAAM,CAAA,CAAE,CAAC,CAAA;QAE7E,IAAI,MAAM,CAAC,MAAM,IAAI,KAAK,CAAC,MAAM,EAAE;AAE/B,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;gBAEpC,IAAI,OAAO,KAAK,CAAC,CAAC,CAAC,KAAK,QAAQ,EAAE;AAE9B,oBAAA,MAAM,KAAK,GAAW,KAAK,CAAC,CAAC,CAAW,CAAC;AAEzC,oBAAA,IAAI,CAAC,CAAC,YAAY,EAAE;AAChB,wBAAA,IAAI,CAAC,IAAI,CACLA,cAAA,CAAA,aAAA,CAAA,KAAA,EAAA,EAAK,SAAS,EAAE,KAAK,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC,EAAA;4BAClCA,cACI,CAAA,aAAA,CAAA,KAAA,EAAA,EAAA,SAAS,EAAE,KAAK,CAAC,KAAK,CAAC,EACvB,KAAK,EAAE;AACH,oCAAA,eAAe,EAAE,KAAK;iCACzB,EACC,CAAA;AACL,4BAAA,CAAC,CAAC,CAAC,YAAY;gCACZA,cAAI,CAAA,aAAA,CAAA,GAAA,EAAA,IAAA,EAAA,YAAY,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,CAAK;gCACrCA,cAAO,CAAA,aAAA,CAAA,GAAA,EAAA,IAAA,CAAA,CAET,CACT,CAAC;qBACL;iBAEJ;aACJ;SAEJ;AAED,QAAA,QACIA,cAAA,CAAA,aAAA,CAAA,KAAA,EAAA,EAAK,SAAS,EAAE,KAAK,CAAC,oBAAoB,CAAC,EACtC,EAAA,IAAI,CACH,EACT;KACJ;SAAM;AACH,QAAA,QACIA,cAAK,CAAA,aAAA,CAAA,KAAA,EAAA,EAAA,SAAS,EAAE,KAAK,CAAC,oBAAoB,CAAC,EAAA;YACvCA,cAA8B,CAAA,aAAA,CAAA,MAAA,EAAA,IAAA,EAAA,mBAAA,CAAA,CAC5B,EACT;KACJ;AAEL;;;;"}