{"version":3,"file":"cori.data.api350.js","sources":["../../node_modules/mdast-util-to-hast/lib/handlers/footnote-reference.js"],"sourcesContent":["/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('mdast').FootnoteReference} FootnoteReference\n * @typedef {import('../state.js').State} State\n */\n\nimport {normalizeUri} from 'micromark-util-sanitize-uri'\n\n/**\n * Turn an mdast `footnoteReference` node into hast.\n *\n * @param {State} state\n *   Info passed around.\n * @param {FootnoteReference} node\n *   mdast node.\n * @returns {Element}\n *   hast node.\n */\nexport function footnoteReference(state, node) {\n  const clobberPrefix =\n    typeof state.options.clobberPrefix === 'string'\n      ? state.options.clobberPrefix\n      : 'user-content-'\n  const id = String(node.identifier).toUpperCase()\n  const safeId = normalizeUri(id.toLowerCase())\n  const index = state.footnoteOrder.indexOf(id)\n  /** @type {number} */\n  let counter\n\n  let reuseCounter = state.footnoteCounts.get(id)\n\n  if (reuseCounter === undefined) {\n    reuseCounter = 0\n    state.footnoteOrder.push(id)\n    counter = state.footnoteOrder.length\n  } else {\n    counter = index + 1\n  }\n\n  reuseCounter += 1\n  state.footnoteCounts.set(id, reuseCounter)\n\n  /** @type {Element} */\n  const link = {\n    type: 'element',\n    tagName: 'a',\n    properties: {\n      href: '#' + clobberPrefix + 'fn-' + safeId,\n      id:\n        clobberPrefix +\n        'fnref-' +\n        safeId +\n        (reuseCounter > 1 ? '-' + reuseCounter : ''),\n      dataFootnoteRef: true,\n      ariaDescribedBy: ['footnote-label']\n    },\n    children: [{type: 'text', value: String(counter)}]\n  }\n  state.patch(node, link)\n\n  /** @type {Element} */\n  const sup = {\n    type: 'element',\n    tagName: 'sup',\n    properties: {},\n    children: [link]\n  }\n  state.patch(node, sup)\n  return state.applyData(node, sup)\n}\n"],"names":["footnoteReference","state","node","clobberPrefix","id","safeId","normalizeUri","index","counter","reuseCounter","link","sup"],"mappings":";;;;;;;AAkBO,SAASA,EAAkBC,GAAOC,GAAM;AAC7C,QAAMC,IACJ,OAAOF,EAAM,QAAQ,iBAAkB,WACnCA,EAAM,QAAQ,gBACd,iBACAG,IAAK,OAAOF,EAAK,UAAU,EAAE,YAAa,GAC1CG,IAASC,EAAaF,EAAG,YAAW,CAAE,GACtCG,IAAQN,EAAM,cAAc,QAAQG,CAAE;AAE5C,MAAII,GAEAC,IAAeR,EAAM,eAAe,IAAIG,CAAE;AAE9C,EAAIK,MAAiB,UACnBA,IAAe,GACfR,EAAM,cAAc,KAAKG,CAAE,GAC3BI,IAAUP,EAAM,cAAc,UAE9BO,IAAUD,IAAQ,GAGpBE,KAAgB,GAChBR,EAAM,eAAe,IAAIG,GAAIK,CAAY;AAGzC,QAAMC,IAAO;AAAA,IACX,MAAM;AAAA,IACN,SAAS;AAAA,IACT,YAAY;AAAA,MACV,MAAM,MAAMP,IAAgB,QAAQE;AAAA,MACpC,IACEF,IACA,WACAE,KACCI,IAAe,IAAI,MAAMA,IAAe;AAAA,MAC3C,iBAAiB;AAAA,MACjB,iBAAiB,CAAC,gBAAgB;AAAA,IACnC;AAAA,IACD,UAAU,CAAC,EAAC,MAAM,QAAQ,OAAO,OAAOD,CAAO,EAAC,CAAC;AAAA,EAClD;AACD,EAAAP,EAAM,MAAMC,GAAMQ,CAAI;AAGtB,QAAMC,IAAM;AAAA,IACV,MAAM;AAAA,IACN,SAAS;AAAA,IACT,YAAY,CAAE;AAAA,IACd,UAAU,CAACD,CAAI;AAAA,EAChB;AACD,SAAAT,EAAM,MAAMC,GAAMS,CAAG,GACdV,EAAM,UAAUC,GAAMS,CAAG;AAClC;","x_google_ignoreList":[0]}