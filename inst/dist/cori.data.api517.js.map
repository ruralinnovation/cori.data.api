{"version":3,"file":"cori.data.api517.js","sources":["../../node_modules/apache-arrow/io/interfaces.mjs"],"sourcesContent":["// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\nimport { __awaiter } from \"tslib\";\nimport streamAdapters from './adapters.mjs';\n/** @ignore */\nexport const ITERATOR_DONE = Object.freeze({ done: true, value: void (0) });\n/** @ignore */\nexport class ArrowJSON {\n    constructor(_json) {\n        this._json = _json;\n    }\n    get schema() { return this._json['schema']; }\n    get batches() { return (this._json['batches'] || []); }\n    get dictionaries() { return (this._json['dictionaries'] || []); }\n}\n/** @ignore */\nexport class ReadableInterop {\n    tee() {\n        return this._getDOMStream().tee();\n    }\n    pipe(writable, options) {\n        return this._getNodeStream().pipe(writable, options);\n    }\n    pipeTo(writable, options) { return this._getDOMStream().pipeTo(writable, options); }\n    pipeThrough(duplex, options) {\n        return this._getDOMStream().pipeThrough(duplex, options);\n    }\n    _getDOMStream() {\n        return this._DOMStream || (this._DOMStream = this.toDOMStream());\n    }\n    _getNodeStream() {\n        return this._nodeStream || (this._nodeStream = this.toNodeStream());\n    }\n}\n/** @ignore */\nexport class AsyncQueue extends ReadableInterop {\n    constructor() {\n        super();\n        this._values = [];\n        this.resolvers = [];\n        this._closedPromise = new Promise((r) => this._closedPromiseResolve = r);\n    }\n    get closed() { return this._closedPromise; }\n    cancel(reason) {\n        return __awaiter(this, void 0, void 0, function* () { yield this.return(reason); });\n    }\n    write(value) {\n        if (this._ensureOpen()) {\n            this.resolvers.length <= 0\n                ? (this._values.push(value))\n                : (this.resolvers.shift().resolve({ done: false, value }));\n        }\n    }\n    abort(value) {\n        if (this._closedPromiseResolve) {\n            this.resolvers.length <= 0\n                ? (this._error = { error: value })\n                : (this.resolvers.shift().reject({ done: true, value }));\n        }\n    }\n    close() {\n        if (this._closedPromiseResolve) {\n            const { resolvers } = this;\n            while (resolvers.length > 0) {\n                resolvers.shift().resolve(ITERATOR_DONE);\n            }\n            this._closedPromiseResolve();\n            this._closedPromiseResolve = undefined;\n        }\n    }\n    [Symbol.asyncIterator]() { return this; }\n    toDOMStream(options) {\n        return streamAdapters.toDOMStream((this._closedPromiseResolve || this._error)\n            ? this\n            : this._values, options);\n    }\n    toNodeStream(options) {\n        return streamAdapters.toNodeStream((this._closedPromiseResolve || this._error)\n            ? this\n            : this._values, options);\n    }\n    throw(_) {\n        return __awaiter(this, void 0, void 0, function* () { yield this.abort(_); return ITERATOR_DONE; });\n    }\n    return(_) {\n        return __awaiter(this, void 0, void 0, function* () { yield this.close(); return ITERATOR_DONE; });\n    }\n    read(size) {\n        return __awaiter(this, void 0, void 0, function* () { return (yield this.next(size, 'read')).value; });\n    }\n    peek(size) {\n        return __awaiter(this, void 0, void 0, function* () { return (yield this.next(size, 'peek')).value; });\n    }\n    next(..._args) {\n        if (this._values.length > 0) {\n            return Promise.resolve({ done: false, value: this._values.shift() });\n        }\n        else if (this._error) {\n            return Promise.reject({ done: true, value: this._error.error });\n        }\n        else if (!this._closedPromiseResolve) {\n            return Promise.resolve(ITERATOR_DONE);\n        }\n        else {\n            return new Promise((resolve, reject) => {\n                this.resolvers.push({ resolve, reject });\n            });\n        }\n    }\n    _ensureOpen() {\n        if (this._closedPromiseResolve) {\n            return true;\n        }\n        throw new Error(`AsyncQueue is closed`);\n    }\n}\n\n//# sourceMappingURL=interfaces.mjs.map\n"],"names":["ITERATOR_DONE","ReadableInterop","writable","options","duplex","AsyncQueue","r","reason","__awaiter","value","resolvers","streamAdapters","_","size","_args","resolve","reject"],"mappings":";;;;;;;;AAmBY,MAACA,IAAgB,OAAO,OAAO,EAAE,MAAM,IAAM,OAAO,QAAU;AAWnE,MAAMC,EAAgB;AAAA,EACzB,MAAM;AACF,WAAO,KAAK,gBAAgB;EAC/B;AAAA,EACD,KAAKC,GAAUC,GAAS;AACpB,WAAO,KAAK,eAAgB,EAAC,KAAKD,GAAUC,CAAO;AAAA,EACtD;AAAA,EACD,OAAOD,GAAUC,GAAS;AAAE,WAAO,KAAK,cAAe,EAAC,OAAOD,GAAUC,CAAO;AAAA,EAAI;AAAA,EACpF,YAAYC,GAAQD,GAAS;AACzB,WAAO,KAAK,cAAe,EAAC,YAAYC,GAAQD,CAAO;AAAA,EAC1D;AAAA,EACD,gBAAgB;AACZ,WAAO,KAAK,eAAe,KAAK,aAAa,KAAK,YAAW;AAAA,EAChE;AAAA,EACD,iBAAiB;AACb,WAAO,KAAK,gBAAgB,KAAK,cAAc,KAAK,aAAY;AAAA,EACnE;AACL;AAEO,MAAME,UAAmBJ,EAAgB;AAAA,EAC5C,cAAc;AACV,aACA,KAAK,UAAU,IACf,KAAK,YAAY,IACjB,KAAK,iBAAiB,IAAI,QAAQ,CAACK,MAAM,KAAK,wBAAwBA,CAAC;AAAA,EAC1E;AAAA,EACD,IAAI,SAAS;AAAE,WAAO,KAAK;AAAA,EAAiB;AAAA,EAC5C,OAAOC,GAAQ;AACX,WAAOC,EAAU,MAAM,QAAQ,QAAQ,aAAa;AAAE,YAAM,KAAK,OAAOD,CAAM;AAAA,IAAI,CAAA;AAAA,EACrF;AAAA,EACD,MAAME,GAAO;AACT,IAAI,KAAK,kBACL,KAAK,UAAU,UAAU,IAClB,KAAK,QAAQ,KAAKA,CAAK,IACvB,KAAK,UAAU,MAAK,EAAG,QAAQ,EAAE,MAAM,IAAO,OAAAA,EAAO,CAAA;AAAA,EAEnE;AAAA,EACD,MAAMA,GAAO;AACT,IAAI,KAAK,0BACL,KAAK,UAAU,UAAU,IAClB,KAAK,SAAS,EAAE,OAAOA,EAAO,IAC9B,KAAK,UAAU,MAAK,EAAG,OAAO,EAAE,MAAM,IAAM,OAAAA,EAAO,CAAA;AAAA,EAEjE;AAAA,EACD,QAAQ;AACJ,QAAI,KAAK,uBAAuB;AAC5B,YAAM,EAAE,WAAAC,EAAW,IAAG;AACtB,aAAOA,EAAU,SAAS;AACtB,QAAAA,EAAU,MAAK,EAAG,QAAQV,CAAa;AAE3C,WAAK,sBAAqB,GAC1B,KAAK,wBAAwB;AAAA,IAChC;AAAA,EACJ;AAAA,EACD,CAAC,OAAO,aAAa,IAAI;AAAE,WAAO;AAAA,EAAO;AAAA,EACzC,YAAYG,GAAS;AACjB,WAAOQ,EAAe,YAAa,KAAK,yBAAyB,KAAK,SAChE,OACA,KAAK,SAASR,CAAO;AAAA,EAC9B;AAAA,EACD,aAAaA,GAAS;AAClB,WAAOQ,EAAe,aAAc,KAAK,yBAAyB,KAAK,SACjE,OACA,KAAK,SAASR,CAAO;AAAA,EAC9B;AAAA,EACD,MAAMS,GAAG;AACL,WAAOJ,EAAU,MAAM,QAAQ,QAAQ,aAAa;AAAE,mBAAM,KAAK,MAAMI,CAAC,GAAUZ;AAAA,IAAgB,CAAA;AAAA,EACrG;AAAA,EACD,OAAOY,GAAG;AACN,WAAOJ,EAAU,MAAM,QAAQ,QAAQ,aAAa;AAAE,mBAAM,KAAK,MAAO,GAASR;AAAA,IAAgB,CAAA;AAAA,EACpG;AAAA,EACD,KAAKa,GAAM;AACP,WAAOL,EAAU,MAAM,QAAQ,QAAQ,aAAa;AAAE,cAAQ,MAAM,KAAK,KAAKK,GAAM,MAAM,GAAG;AAAA,IAAM,CAAE;AAAA,EACxG;AAAA,EACD,KAAKA,GAAM;AACP,WAAOL,EAAU,MAAM,QAAQ,QAAQ,aAAa;AAAE,cAAQ,MAAM,KAAK,KAAKK,GAAM,MAAM,GAAG;AAAA,IAAM,CAAE;AAAA,EACxG;AAAA,EACD,QAAQC,GAAO;AACX,WAAI,KAAK,QAAQ,SAAS,IACf,QAAQ,QAAQ,EAAE,MAAM,IAAO,OAAO,KAAK,QAAQ,MAAO,EAAA,CAAE,IAE9D,KAAK,SACH,QAAQ,OAAO,EAAE,MAAM,IAAM,OAAO,KAAK,OAAO,MAAK,CAAE,IAExD,KAAK,wBAIJ,IAAI,QAAQ,CAACC,GAASC,MAAW;AACpC,WAAK,UAAU,KAAK,EAAE,SAAAD,GAAS,QAAAC,EAAQ,CAAA;AAAA,IACvD,CAAa,IALM,QAAQ,QAAQhB,CAAa;AAAA,EAO3C;AAAA,EACD,cAAc;AACV,QAAI,KAAK;AACL,aAAO;AAEX,UAAM,IAAI,MAAM,sBAAsB;AAAA,EACzC;AACL;","x_google_ignoreList":[0]}