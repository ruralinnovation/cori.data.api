{"version":3,"file":"relocate.js","sources":["../../../../../../node_modules/arquero/src/verbs/relocate.js"],"sourcesContent":["import _select from '../engine/select';\nimport resolve from '../helpers/selection';\nimport error from '../util/error';\n\nexport default function(table, columns, { before, after } = {}) {\n  const bef = before != null;\n  const aft = after != null;\n\n  if (!(bef || aft)) {\n    error('relocate requires a before or after option.');\n  }\n  if (bef && aft) {\n    error('relocate accepts only one of the before or after options.');\n  }\n\n  columns = resolve(table, columns);\n  const anchors = [...resolve(table, bef ? before : after).keys()];\n  const anchor = bef ? anchors[0] : anchors.pop();\n  const select = new Map();\n\n  // marshal inputs to select in desired order\n  table.columnNames().forEach(name => {\n    // check if we should assign the current column\n    const assign = !columns.has(name);\n\n    // at anchor column, insert relocated columns\n    if (name === anchor) {\n      if (aft && assign) select.set(name, name);\n      for (const [key, value] of columns) {\n        select.set(key, value);\n      }\n      if (aft) return; // exit if current column has been handled\n    }\n\n    if (assign) select.set(name, name);\n  });\n\n  return _select(table, select);\n}"],"names":[],"mappings":";;;;;;;;;;AAIe,mBAAQ,CAAC,KAAK,EAAE,OAAO,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,EAAE;AAChE,EAAE,MAAM,GAAG,GAAG,MAAM,IAAI,IAAI,CAAC;AAC7B,EAAE,MAAM,GAAG,GAAG,KAAK,IAAI,IAAI,CAAC;AAC5B;AACA,EAAE,IAAI,EAAE,GAAG,IAAI,GAAG,CAAC,EAAE;AACrB,IAAI,KAAK,CAAC,6CAA6C,CAAC,CAAC;AACzD,GAAG;AACH,EAAE,IAAI,GAAG,IAAI,GAAG,EAAE;AAClB,IAAI,KAAK,CAAC,2DAA2D,CAAC,CAAC;AACvE,GAAG;AACH;AACA,EAAE,OAAO,GAAG,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;AACpC,EAAE,MAAM,OAAO,GAAG,CAAC,GAAG,OAAO,CAAC,KAAK,EAAE,GAAG,GAAG,MAAM,GAAG,KAAK,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC;AACnE,EAAE,MAAM,MAAM,GAAG,GAAG,GAAG,OAAO,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,GAAG,EAAE,CAAC;AAClD,EAAE,MAAM,MAAM,GAAG,IAAI,GAAG,EAAE,CAAC;AAC3B;AACA;AACA,EAAE,KAAK,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,IAAI,IAAI;AACtC;AACA,IAAI,MAAM,MAAM,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;AACtC;AACA;AACA,IAAI,IAAI,IAAI,KAAK,MAAM,EAAE;AACzB,MAAM,IAAI,GAAG,IAAI,MAAM,EAAE,MAAM,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;AAChD,MAAM,KAAK,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,OAAO,EAAE;AAC1C,QAAQ,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;AAC/B,OAAO;AACP,MAAM,IAAI,GAAG,EAAE,OAAO;AACtB,KAAK;AACL;AACA,IAAI,IAAI,MAAM,EAAE,MAAM,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;AACvC,GAAG,CAAC,CAAC;AACL;AACA,EAAE,OAAO,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;AAChC;;;;","x_google_ignoreList":[0]}