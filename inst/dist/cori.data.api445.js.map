{"version":3,"file":"cori.data.api445.js","sources":["../../node_modules/arquero/src/engine/reduce.js"],"sourcesContent":["import { reduceFlat, reduceGroups } from './reduce/util';\nimport columnSet from '../table/column-set';\n\nexport default function(table, reducer) {\n  const cols = columnSet();\n  const groups = table.groups();\n\n  // initialize groups\n  const { get, names = [], rows, size = 1 } = groups || {};\n  const counts = new Uint32Array(size + 1);\n  names.forEach(name => cols.add(name, null));\n\n  // compute reduced values\n  const cells = groups\n    ? reduceGroups(table, reducer, groups)\n    : [ reduceFlat(table, reducer) ];\n\n  // initialize output columns\n  reducer.outputs().map(name => cols.add(name, []));\n\n  // write reduced values to output columns\n  const n = counts.length - 1;\n  let len = 0;\n  for (let i = 0; i < n; ++i) {\n    len += counts[i + 1] = reducer.write(cells[i], cols.data, counts[i]);\n  }\n\n  // write group values to output columns\n  if (groups) {\n    const data = table.data();\n    names.forEach((name, index) => {\n      const column = cols.data[name] = Array(len);\n      const getter = get[index];\n      for (let i = 0, j = 0; i < size; ++i) {\n        column.fill(getter(rows[i], data), j, j += counts[i + 1]);\n      }\n    });\n  }\n\n  return table.create(cols.new());\n}"],"names":["__reduce","table","reducer","cols","columnSet","groups","get","names","rows","size","counts","name","cells","reduceGroups","reduceFlat","n","len","i","data","index","column","getter","j"],"mappings":";;;;;;;;AAGe,SAAAA,EAASC,GAAOC,GAAS;AACtC,QAAMC,IAAOC,KACPC,IAASJ,EAAM,UAGf,EAAE,KAAAK,GAAK,OAAAC,IAAQ,IAAI,MAAAC,GAAM,MAAAC,IAAO,EAAC,IAAKJ,KAAU,IAChDK,IAAS,IAAI,YAAYD,IAAO,CAAC;AACvC,EAAAF,EAAM,QAAQ,CAAAI,MAAQR,EAAK,IAAIQ,GAAM,IAAI,CAAC;AAG1C,QAAMC,IAAQP,IACVQ,EAAaZ,GAAOC,GAASG,CAAM,IACnC,CAAES,EAAWb,GAAOC,CAAO;AAG/B,EAAAA,EAAQ,UAAU,IAAI,CAAAS,MAAQR,EAAK,IAAIQ,GAAM,CAAE,CAAA,CAAC;AAGhD,QAAMI,IAAIL,EAAO,SAAS;AAC1B,MAAIM,IAAM;AACV,WAASC,IAAI,GAAGA,IAAIF,GAAG,EAAEE;AACvB,IAAAD,KAAON,EAAOO,IAAI,CAAC,IAAIf,EAAQ,MAAMU,EAAMK,CAAC,GAAGd,EAAK,MAAMO,EAAOO,CAAC,CAAC;AAIrE,MAAIZ,GAAQ;AACV,UAAMa,IAAOjB,EAAM;AACnB,IAAAM,EAAM,QAAQ,CAACI,GAAMQ,MAAU;AAC7B,YAAMC,IAASjB,EAAK,KAAKQ,CAAI,IAAI,MAAMK,CAAG,GACpCK,IAASf,EAAIa,CAAK;AACxB,eAASF,IAAI,GAAGK,IAAI,GAAGL,IAAIR,GAAM,EAAEQ;AACjC,QAAAG,EAAO,KAAKC,EAAOb,EAAKS,CAAC,GAAGC,CAAI,GAAGI,GAAGA,KAAKZ,EAAOO,IAAI,CAAC,CAAC;AAAA,IAEhE,CAAK;AAAA,EACF;AAED,SAAOhB,EAAM,OAAOE,EAAK,IAAK,CAAA;AAChC;","x_google_ignoreList":[0]}