{"version":3,"file":"infer.js","sources":["../../../../../../node_modules/arquero/src/format/infer.js"],"sourcesContent":["import isDate from '../util/is-date';\n\nfunction isExactDateUTC(d) {\n  return d.getUTCHours() === 0\n    && d.getUTCMinutes() === 0\n    && d.getUTCSeconds() === 0\n    && d.getUTCMilliseconds() === 0;\n}\n\nexport default function(scan, options = {}) {\n  let count = 0;\n  let nulls = 0;\n  let dates = 0;\n  let dutcs = 0;\n  let nums = 0;\n  let digits = 0;\n\n  scan(value => {\n    ++count;\n    if (value == null) {\n      ++nulls;\n      return;\n    }\n\n    const type = typeof value;\n    if (type === 'object' && isDate(value)) {\n      ++dates;\n      if (isExactDateUTC(value)) ++dutcs;\n    } else if (type === 'number') {\n      ++nums;\n      if (value === value &&  (value | 0) !== value) {\n        const s = value + '';\n        const p = s.indexOf('.');\n        if (p >= 0) {\n          const e = s.indexOf('e');\n          const l = e > 0 ? e : s.length;\n          digits = Math.max(digits, l - p - 1);\n        }\n      }\n    }\n  });\n\n  return {\n    align:  (nulls + nums + dates) / count > 0.5 ? 'r' : 'l',\n    format: {\n      utc:    dates === dutcs,\n      digits: Math.min(digits, options.maxdigits || 6)\n    }\n  };\n}"],"names":[],"mappings":";;;;;;;;AAEA,SAAS,cAAc,CAAC,CAAC,EAAE;AAC3B,EAAE,OAAO,CAAC,CAAC,WAAW,EAAE,KAAK,CAAC;AAC9B,OAAO,CAAC,CAAC,aAAa,EAAE,KAAK,CAAC;AAC9B,OAAO,CAAC,CAAC,aAAa,EAAE,KAAK,CAAC;AAC9B,OAAO,CAAC,CAAC,kBAAkB,EAAE,KAAK,CAAC,CAAC;AACpC,CAAC;AACD;AACe,oBAAQ,CAAC,IAAI,EAAE,OAAO,GAAG,EAAE,EAAE;AAC5C,EAAE,IAAI,KAAK,GAAG,CAAC,CAAC;AAChB,EAAE,IAAI,KAAK,GAAG,CAAC,CAAC;AAChB,EAAE,IAAI,KAAK,GAAG,CAAC,CAAC;AAChB,EAAE,IAAI,KAAK,GAAG,CAAC,CAAC;AAChB,EAAE,IAAI,IAAI,GAAG,CAAC,CAAC;AACf,EAAE,IAAI,MAAM,GAAG,CAAC,CAAC;AACjB;AACA,EAAE,IAAI,CAAC,KAAK,IAAI;AAChB,IAAI,EAAE,KAAK,CAAC;AACZ,IAAI,IAAI,KAAK,IAAI,IAAI,EAAE;AACvB,MAAM,EAAE,KAAK,CAAC;AACd,MAAM,OAAO;AACb,KAAK;AACL;AACA,IAAI,MAAM,IAAI,GAAG,OAAO,KAAK,CAAC;AAC9B,IAAI,IAAI,IAAI,KAAK,QAAQ,IAAI,MAAM,CAAC,KAAK,CAAC,EAAE;AAC5C,MAAM,EAAE,KAAK,CAAC;AACd,MAAM,IAAI,cAAc,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC;AACzC,KAAK,MAAM,IAAI,IAAI,KAAK,QAAQ,EAAE;AAClC,MAAM,EAAE,IAAI,CAAC;AACb,MAAM,IAAI,KAAK,KAAK,KAAK,KAAK,CAAC,KAAK,GAAG,CAAC,MAAM,KAAK,EAAE;AACrD,QAAQ,MAAM,CAAC,GAAG,KAAK,GAAG,EAAE,CAAC;AAC7B,QAAQ,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;AACjC,QAAQ,IAAI,CAAC,IAAI,CAAC,EAAE;AACpB,UAAU,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;AACnC,UAAU,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;AACzC,UAAU,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;AAC/C,SAAS;AACT,OAAO;AACP,KAAK;AACL,GAAG,CAAC,CAAC;AACL;AACA,EAAE,OAAO;AACT,IAAI,KAAK,GAAG,CAAC,KAAK,GAAG,IAAI,GAAG,KAAK,IAAI,KAAK,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG;AAC5D,IAAI,MAAM,EAAE;AACZ,MAAM,GAAG,KAAK,KAAK,KAAK,KAAK;AAC7B,MAAM,MAAM,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,OAAO,CAAC,SAAS,IAAI,CAAC,CAAC;AACtD,KAAK;AACL,GAAG,CAAC;AACJ;;;;","x_google_ignoreList":[0]}