{"version":3,"file":"cori.data.api453.js","sources":["../../node_modules/arquero/src/verbs/impute.js"],"sourcesContent":["import _impute from '../engine/impute';\nimport _rollup from '../engine/rollup';\nimport parse from '../expression/parse';\nimport parseValues from './util/parse';\nimport { array_agg_distinct } from '../op/op-api';\nimport error from '../util/error';\nimport toString from '../util/to-string';\n\nexport default function(table, values, options = {}) {\n  values = parse(values, { table });\n\n  values.names.forEach(name =>\n    table.column(name) ? 0 : error(`Invalid impute column ${toString(name)}`)\n  );\n\n  if (options.expand) {\n    const opt = { preparse, aggronly: true };\n    const params = parseValues('impute', table, options.expand, opt);\n    const result = _rollup(table.ungroup(), params);\n    return _impute(\n      table, values, params.names,\n      params.names.map(name => result.get(name, 0))\n    );\n  } else {\n    return _impute(table, values);\n  }\n}\n\n// map direct field reference to \"unique\" aggregate\nfunction preparse(map) {\n  map.forEach((value, key) =>\n    value.field ? map.set(key, array_agg_distinct(value + '')) : 0\n  );\n}"],"names":["__impute","table","values","options","parse","name","error","toString","opt","preparse","params","parseValues","result","_rollup","_impute","map","value","key","array_agg_distinct"],"mappings":";;;;;;;;;;;;;AAQe,SAAQA,EAACC,GAAOC,GAAQC,IAAU,IAAI;AAOnD,MANAD,IAASE,EAAMF,GAAQ,EAAE,OAAAD,EAAO,CAAA,GAEhCC,EAAO,MAAM;AAAA,IAAQ,CAAAG,MACnBJ,EAAM,OAAOI,CAAI,IAAI,IAAIC,EAAM,yBAAyBC,EAASF,CAAI,CAAC,EAAE;AAAA,EAC5E,GAEMF,EAAQ,QAAQ;AAClB,UAAMK,IAAM,EAAE,UAAAC,GAAU,UAAU,GAAI,GAChCC,IAASC,EAAY,UAAUV,GAAOE,EAAQ,QAAQK,CAAG,GACzDI,IAASC,EAAQZ,EAAM,QAAS,GAAES,CAAM;AAC9C,WAAOI;AAAA,MACLb;AAAA,MAAOC;AAAA,MAAQQ,EAAO;AAAA,MACtBA,EAAO,MAAM,IAAI,CAAAL,MAAQO,EAAO,IAAIP,GAAM,CAAC,CAAC;AAAA,IAClD;AAAA,EACA;AACI,WAAOS,EAAQb,GAAOC,CAAM;AAEhC;AAGA,SAASO,EAASM,GAAK;AACrB,EAAAA,EAAI;AAAA,IAAQ,CAACC,GAAOC,MAClBD,EAAM,QAAQD,EAAI,IAAIE,GAAKC,EAAmBF,IAAQ,EAAE,CAAC,IAAI;AAAA,EACjE;AACA;","x_google_ignoreList":[0]}