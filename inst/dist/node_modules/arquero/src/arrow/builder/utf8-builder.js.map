{"version":3,"file":"utf8-builder.js","sources":["../../../../../../../node_modules/arquero/src/arrow/builder/utf8-builder.js"],"sourcesContent":["import { array, ceil64Bytes, writeUtf8 } from './util';\n\nexport default function(type, length, strlen) {\n  const offset = array(Int32Array, length + 1);\n  const buf = array(Uint8Array, 3 * strlen);\n\n  let idx = 0;\n\n  return {\n    set(value, index) {\n      idx += writeUtf8(buf, idx, value);\n      offset[index + 1] = idx;\n    },\n    data: () => {\n      // slice utf buffer if over-allocated\n      const dlen = ceil64Bytes(idx);\n      const data = buf.length > dlen ? buf.subarray(0, dlen) : buf;\n      return { type, length, buffers: [offset, data] };\n    }\n  };\n}"],"names":[],"mappings":";;;;;;;;AAEe,oBAAQ,CAAC,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE;AAC9C,EAAE,MAAM,MAAM,GAAG,KAAK,CAAC,UAAU,EAAE,MAAM,GAAG,CAAC,CAAC,CAAC;AAC/C,EAAE,MAAM,GAAG,GAAG,KAAK,CAAC,UAAU,EAAE,CAAC,GAAG,MAAM,CAAC,CAAC;AAC5C;AACA,EAAE,IAAI,GAAG,GAAG,CAAC,CAAC;AACd;AACA,EAAE,OAAO;AACT,IAAI,GAAG,CAAC,KAAK,EAAE,KAAK,EAAE;AACtB,MAAM,GAAG,IAAI,SAAS,CAAC,GAAG,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;AACxC,MAAM,MAAM,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC;AAC9B,KAAK;AACL,IAAI,IAAI,EAAE,MAAM;AAChB;AACA,MAAM,MAAM,IAAI,GAAG,WAAW,CAAC,GAAG,CAAC,CAAC;AACpC,MAAM,MAAM,IAAI,GAAG,GAAG,CAAC,MAAM,GAAG,IAAI,GAAG,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,GAAG,CAAC;AACnE,MAAM,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,EAAE,CAAC;AACvD,KAAK;AACL,GAAG,CAAC;AACJ;;;;","x_google_ignoreList":[0]}