{"version":3,"file":"cori.data.api350.js","sources":["../../node_modules/html-to-image/es/dataurl.js"],"sourcesContent":["function getContentFromDataUrl(dataURL) {\n    return dataURL.split(/,/)[1];\n}\nexport function isDataUrl(url) {\n    return url.search(/^(data:)/) !== -1;\n}\nexport function makeDataUrl(content, mimeType) {\n    return `data:${mimeType};base64,${content}`;\n}\nexport async function fetchAsDataURL(url, init, process) {\n    const res = await fetch(url, init);\n    if (res.status === 404) {\n        throw new Error(`Resource \"${res.url}\" not found`);\n    }\n    const blob = await res.blob();\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onerror = reject;\n        reader.onloadend = () => {\n            try {\n                resolve(process({ res, result: reader.result }));\n            }\n            catch (error) {\n                reject(error);\n            }\n        };\n        reader.readAsDataURL(blob);\n    });\n}\nconst cache = {};\nfunction getCacheKey(url, contentType, includeQueryParams) {\n    let key = url.replace(/\\?.*/, '');\n    if (includeQueryParams) {\n        key = url;\n    }\n    // font resource\n    if (/ttf|otf|eot|woff2?/i.test(key)) {\n        key = key.replace(/.*\\//, '');\n    }\n    return contentType ? `[${contentType}]${key}` : key;\n}\nexport async function resourceToDataURL(resourceUrl, contentType, options) {\n    const cacheKey = getCacheKey(resourceUrl, contentType, options.includeQueryParams);\n    if (cache[cacheKey] != null) {\n        return cache[cacheKey];\n    }\n    // ref: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n    if (options.cacheBust) {\n        // eslint-disable-next-line no-param-reassign\n        resourceUrl += (/\\?/.test(resourceUrl) ? '&' : '?') + new Date().getTime();\n    }\n    let dataURL;\n    try {\n        const content = await fetchAsDataURL(resourceUrl, options.fetchRequestInit, ({ res, result }) => {\n            if (!contentType) {\n                // eslint-disable-next-line no-param-reassign\n                contentType = res.headers.get('Content-Type') || '';\n            }\n            return getContentFromDataUrl(result);\n        });\n        dataURL = makeDataUrl(content, contentType);\n    }\n    catch (error) {\n        dataURL = options.imagePlaceholder || '';\n        let msg = `Failed to fetch resource: ${resourceUrl}`;\n        if (error) {\n            msg = typeof error === 'string' ? error : error.message;\n        }\n        if (msg) {\n            console.warn(msg);\n        }\n    }\n    cache[cacheKey] = dataURL;\n    return dataURL;\n}\n//# sourceMappingURL=dataurl.js.map"],"names":["getContentFromDataUrl","dataURL","isDataUrl","url","makeDataUrl","content","mimeType","fetchAsDataURL","init","process","res","blob","resolve","reject","reader","error","cache","getCacheKey","contentType","includeQueryParams","key","resourceToDataURL","resourceUrl","options","cacheKey","result","msg"],"mappings":";;;;;;AAAA,SAASA,EAAsBC,GAAS;AACpC,SAAOA,EAAQ,MAAM,GAAG,EAAE,CAAC;AAC/B;AACO,SAASC,EAAUC,GAAK;AAC3B,SAAOA,EAAI,OAAO,UAAU,MAAM;AACtC;AACO,SAASC,EAAYC,GAASC,GAAU;AAC3C,SAAO,QAAQA,CAAQ,WAAWD,CAAO;AAC7C;AACO,eAAeE,EAAeJ,GAAKK,GAAMC,GAAS;AACrD,QAAMC,IAAM,MAAM,MAAMP,GAAKK,CAAI;AACjC,MAAIE,EAAI,WAAW;AACf,UAAM,IAAI,MAAM,aAAaA,EAAI,GAAG,aAAa;AAErD,QAAMC,IAAO,MAAMD,EAAI;AACvB,SAAO,IAAI,QAAQ,CAACE,GAASC,MAAW;AACpC,UAAMC,IAAS,IAAI;AACnB,IAAAA,EAAO,UAAUD,GACjBC,EAAO,YAAY,MAAM;AACrB,UAAI;AACA,QAAAF,EAAQH,EAAQ,EAAE,KAAAC,GAAK,QAAQI,EAAO,OAAQ,CAAA,CAAC;AAAA,MAClD,SACMC,GAAO;AACV,QAAAF,EAAOE,CAAK;AAAA,MACf;AAAA,IACb,GACQD,EAAO,cAAcH,CAAI;AAAA,EACjC,CAAK;AACL;AACA,MAAMK,IAAQ,CAAA;AACd,SAASC,EAAYd,GAAKe,GAAaC,GAAoB;AACvD,MAAIC,IAAMjB,EAAI,QAAQ,QAAQ,EAAE;AAChC,SAAIgB,MACAC,IAAMjB,IAGN,sBAAsB,KAAKiB,CAAG,MAC9BA,IAAMA,EAAI,QAAQ,QAAQ,EAAE,IAEzBF,IAAc,IAAIA,CAAW,IAAIE,CAAG,KAAKA;AACpD;AACO,eAAeC,EAAkBC,GAAaJ,GAAaK,GAAS;AACvE,QAAMC,IAAWP,EAAYK,GAAaJ,GAAaK,EAAQ,kBAAkB;AACjF,MAAIP,EAAMQ,CAAQ,KAAK;AACnB,WAAOR,EAAMQ,CAAQ;AAGzB,EAAID,EAAQ,cAERD,MAAgB,KAAK,KAAKA,CAAW,IAAI,MAAM,QAAO,oBAAI,QAAO;AAErE,MAAIrB;AACJ,MAAI;AACA,UAAMI,IAAU,MAAME,EAAee,GAAaC,EAAQ,kBAAkB,CAAC,EAAE,KAAAb,GAAK,QAAAe,SAC3EP,MAEDA,IAAcR,EAAI,QAAQ,IAAI,cAAc,KAAK,KAE9CV,EAAsByB,CAAM,EACtC;AACD,IAAAxB,IAAUG,EAAYC,GAASa,CAAW;AAAA,EAC7C,SACMH,GAAO;AACV,IAAAd,IAAUsB,EAAQ,oBAAoB;AACtC,QAAIG,IAAM,6BAA6BJ,CAAW;AAClD,IAAIP,MACAW,IAAM,OAAOX,KAAU,WAAWA,IAAQA,EAAM,UAEhDW,KACA,QAAQ,KAAKA,CAAG;AAAA,EAEvB;AACD,SAAAV,EAAMQ,CAAQ,IAAIvB,GACXA;AACX;","x_google_ignoreList":[0]}