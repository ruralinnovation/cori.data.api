{"version":3,"file":"date.js","sources":["../../../../../../../node_modules/arquero/src/op/functions/date.js"],"sourcesContent":["import { formatDate, formatUTCDate } from '../../util/format-date';\nimport parseIsoDate from '../../util/parse-iso-date';\n\nconst msMinute = 6e4;\nconst msDay = 864e5;\nconst msWeek = 6048e5;\n\nconst t0 = new Date();\nconst t1 = new Date();\nconst t = d => (\n  t0.setTime(typeof d === 'string' ? parseIsoDate(d) : d),\n  t0\n);\n\n/**\n * Function to create a new Date value.\n * If no arguments are provided, the current time is used.\n * @param {number} [year] The year.\n * @param {number} [month=0] The (zero-based) month.\n * @param {number} [date=1] The date within the month.\n * @param {number} [hours=0] The hour within the day.\n * @param {number} [minutes=0] The minute within the hour.\n * @param {number} [seconds=0] The second within the minute.\n * @param {number} [milliseconds=0] The milliseconds within the second.\n * @return {date} The resuting Date value.\n */\nfunction datetime(year, month, date, hours, minutes, seconds, milliseconds) {\n  return !arguments.length\n    ? new Date(Date.now())\n    : new Date(\n        year,\n        month || 0,\n        date == null ? 1 : date,\n        hours || 0,\n        minutes || 0,\n        seconds || 0,\n        milliseconds || 0\n      );\n}\n\n/**\n * Function to create a new Date value according to UTC time.\n * If no arguments are provided, the current time is used.\n * @param {number} [year] The year.\n * @param {number} [month=0] The (zero-based) month.\n * @param {number} [date=1] The date within the month.\n * @param {number} [hours=0] The hour within the day.\n * @param {number} [minutes=0] The minute within the hour.\n * @param {number} [seconds=0] The second within the minute.\n * @param {number} [milliseconds=0] The milliseconds within the second.\n * @return {date} The resuting Date value.\n */\nfunction utcdatetime(year, month, date, hours, minutes, seconds, milliseconds) {\n  return !arguments.length\n    ? new Date(Date.now())\n    : new Date(Date.UTC(\n        year,\n        month || 0,\n        date == null ? 1 : date,\n        hours || 0,\n        minutes || 0,\n        seconds || 0,\n        milliseconds || 0\n      ));\n}\n\nfunction dayofyear(date) {\n  t1.setTime(+date);\n  t1.setHours(0, 0, 0, 0);\n  t0.setTime(+t1);\n  t0.setMonth(0);\n  t0.setDate(1);\n  const tz = (t1.getTimezoneOffset() - t0.getTimezoneOffset()) * msMinute;\n  return Math.floor(1 + ((t1 - t0) - tz) / msDay);\n}\n\nfunction utcdayofyear(date) {\n  t1.setTime(+date);\n  t1.setUTCHours(0, 0, 0, 0);\n  const t0 = Date.UTC(t1.getUTCFullYear(), 0, 1);\n  return Math.floor(1 + (t1 - t0) / msDay);\n}\n\nfunction week(date, firstday) {\n  const i = firstday || 0;\n  t1.setTime(+date);\n  t1.setDate(t1.getDate() - (t1.getDay() + 7 - i) % 7);\n  t1.setHours(0, 0, 0, 0);\n  t0.setTime(+date);\n  t0.setMonth(0);\n  t0.setDate(1);\n  t0.setDate(1 - (t0.getDay() + 7 - i) % 7);\n  t0.setHours(0, 0, 0, 0);\n  const tz = (t1.getTimezoneOffset() - t0.getTimezoneOffset()) * msMinute;\n  return Math.floor((1 + (t1 - t0) - tz) / msWeek);\n}\n\nfunction utcweek(date, firstday) {\n  const i = firstday || 0;\n  t1.setTime(+date);\n  t1.setUTCDate(t1.getUTCDate() - (t1.getUTCDay() + 7 - i) % 7);\n  t1.setUTCHours(0, 0, 0, 0);\n  t0.setTime(+date);\n  t0.setUTCMonth(0);\n  t0.setUTCDate(1);\n  t0.setUTCDate(1 - (t0.getUTCDay() + 7 - i) % 7);\n  t0.setUTCHours(0, 0, 0, 0);\n  return Math.floor((1 + (t1 - t0)) / msWeek);\n}\n\nexport default {\n  format_date:     (date, shorten) => formatDate(t(date), !shorten),\n  format_utcdate:  (date, shorten) => formatUTCDate(t(date), !shorten),\n  timestamp:       (date) => +t(date),\n  year:            (date) => t(date).getFullYear(),\n  quarter:         (date) => Math.floor(t(date).getMonth() / 3),\n  month:           (date) => t(date).getMonth(),\n  date:            (date) => t(date).getDate(),\n  dayofweek:       (date) => t(date).getDay(),\n  hours:           (date) => t(date).getHours(),\n  minutes:         (date) => t(date).getMinutes(),\n  seconds:         (date) => t(date).getSeconds(),\n  milliseconds:    (date) => t(date).getMilliseconds(),\n  utcyear:         (date) => t(date).getUTCFullYear(),\n  utcquarter:      (date) => Math.floor(t(date).getUTCMonth() / 3),\n  utcmonth:        (date) => t(date).getUTCMonth(),\n  utcdate:         (date) => t(date).getUTCDate(),\n  utcdayofweek:    (date) => t(date).getUTCDay(),\n  utchours:        (date) => t(date).getUTCHours(),\n  utcminutes:      (date) => t(date).getUTCMinutes(),\n  utcseconds:      (date) => t(date).getUTCSeconds(),\n  utcmilliseconds: (date) => t(date).getUTCMilliseconds(),\n  datetime,\n  dayofyear,\n  week,\n  utcdatetime,\n  utcdayofyear,\n  utcweek,\n  now: Date.now\n};"],"names":[],"mappings":"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","x_google_ignoreList":[0]}