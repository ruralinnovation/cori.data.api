/*
 * CORI Data API component library
 * {@link https://github.com/ruralinnovation/cori.data.api}
 * @copyright Rural Innovation Strategies, Inc.
 * @license ISC
 */
import _derive from '../engine/derive.js';
import _filter from '../engine/filter.js';
import parse from '../expression/parse.js';

function __filter(table, criteria) {
  const test = parse({ p: criteria }, { table });
  let predicate = test.exprs[0];
  if (test.ops.length) {
    const { data } = _derive(table, test, { drop: true }).column('p');
    predicate = row => data[row];
  }
  return _filter(table, predicate);
}

export { __filter as default };
//# sourceMappingURL=filter.js.map
