{"version":3,"file":"cori.data.api521.js","sources":["../../node_modules/apache-arrow/ipc/metadata/file.mjs"],"sourcesContent":["// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n/* eslint-disable @typescript-eslint/naming-convention */\nimport { Block as _Block } from '../../fb/block.mjs';\nimport { Footer as _Footer } from '../../fb/footer.mjs';\nimport * as flatbuffers from 'flatbuffers';\nvar Builder = flatbuffers.Builder;\nvar ByteBuffer = flatbuffers.ByteBuffer;\nimport { Schema } from '../../schema.mjs';\nimport { MetadataVersion } from '../../enum.mjs';\nimport { toUint8Array } from '../../util/buffer.mjs';\nimport { bigIntToNumber } from '../../util/bigint.mjs';\n/** @ignore */\nclass Footer_ {\n    /** @nocollapse */\n    static decode(buf) {\n        buf = new ByteBuffer(toUint8Array(buf));\n        const footer = _Footer.getRootAsFooter(buf);\n        const schema = Schema.decode(footer.schema(), new Map(), footer.version());\n        return new OffHeapFooter(schema, footer);\n    }\n    /** @nocollapse */\n    static encode(footer) {\n        const b = new Builder();\n        const schemaOffset = Schema.encode(b, footer.schema);\n        _Footer.startRecordBatchesVector(b, footer.numRecordBatches);\n        for (const rb of [...footer.recordBatches()].slice().reverse()) {\n            FileBlock.encode(b, rb);\n        }\n        const recordBatchesOffset = b.endVector();\n        _Footer.startDictionariesVector(b, footer.numDictionaries);\n        for (const db of [...footer.dictionaryBatches()].slice().reverse()) {\n            FileBlock.encode(b, db);\n        }\n        const dictionaryBatchesOffset = b.endVector();\n        _Footer.startFooter(b);\n        _Footer.addSchema(b, schemaOffset);\n        _Footer.addVersion(b, MetadataVersion.V5);\n        _Footer.addRecordBatches(b, recordBatchesOffset);\n        _Footer.addDictionaries(b, dictionaryBatchesOffset);\n        _Footer.finishFooterBuffer(b, _Footer.endFooter(b));\n        return b.asUint8Array();\n    }\n    get numRecordBatches() { return this._recordBatches.length; }\n    get numDictionaries() { return this._dictionaryBatches.length; }\n    constructor(schema, version = MetadataVersion.V5, recordBatches, dictionaryBatches) {\n        this.schema = schema;\n        this.version = version;\n        recordBatches && (this._recordBatches = recordBatches);\n        dictionaryBatches && (this._dictionaryBatches = dictionaryBatches);\n    }\n    *recordBatches() {\n        for (let block, i = -1, n = this.numRecordBatches; ++i < n;) {\n            if (block = this.getRecordBatch(i)) {\n                yield block;\n            }\n        }\n    }\n    *dictionaryBatches() {\n        for (let block, i = -1, n = this.numDictionaries; ++i < n;) {\n            if (block = this.getDictionaryBatch(i)) {\n                yield block;\n            }\n        }\n    }\n    getRecordBatch(index) {\n        return index >= 0\n            && index < this.numRecordBatches\n            && this._recordBatches[index] || null;\n    }\n    getDictionaryBatch(index) {\n        return index >= 0\n            && index < this.numDictionaries\n            && this._dictionaryBatches[index] || null;\n    }\n}\nexport { Footer_ as Footer };\n/** @ignore */\nclass OffHeapFooter extends Footer_ {\n    get numRecordBatches() { return this._footer.recordBatchesLength(); }\n    get numDictionaries() { return this._footer.dictionariesLength(); }\n    constructor(schema, _footer) {\n        super(schema, _footer.version());\n        this._footer = _footer;\n    }\n    getRecordBatch(index) {\n        if (index >= 0 && index < this.numRecordBatches) {\n            const fileBlock = this._footer.recordBatches(index);\n            if (fileBlock) {\n                return FileBlock.decode(fileBlock);\n            }\n        }\n        return null;\n    }\n    getDictionaryBatch(index) {\n        if (index >= 0 && index < this.numDictionaries) {\n            const fileBlock = this._footer.dictionaries(index);\n            if (fileBlock) {\n                return FileBlock.decode(fileBlock);\n            }\n        }\n        return null;\n    }\n}\n/** @ignore */\nexport class FileBlock {\n    /** @nocollapse */\n    static decode(block) {\n        return new FileBlock(block.metaDataLength(), block.bodyLength(), block.offset());\n    }\n    /** @nocollapse */\n    static encode(b, fileBlock) {\n        const { metaDataLength } = fileBlock;\n        const offset = BigInt(fileBlock.offset);\n        const bodyLength = BigInt(fileBlock.bodyLength);\n        return _Block.createBlock(b, offset, metaDataLength, bodyLength);\n    }\n    constructor(metaDataLength, bodyLength, offset) {\n        this.metaDataLength = metaDataLength;\n        this.offset = bigIntToNumber(offset);\n        this.bodyLength = bigIntToNumber(bodyLength);\n    }\n}\n\n//# sourceMappingURL=file.mjs.map\n"],"names":["Builder","flatbuffers.Builder","ByteBuffer","flatbuffers.ByteBuffer","Footer_","buf","toUint8Array","footer","_Footer","schema","Schema","OffHeapFooter","b","schemaOffset","rb","FileBlock","recordBatchesOffset","db","dictionaryBatchesOffset","MetadataVersion","version","recordBatches","dictionaryBatches","block","i","n","index","_footer","fileBlock","metaDataLength","offset","bodyLength","_Block","bigIntToNumber"],"mappings":"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","x_google_ignoreList":[0]}